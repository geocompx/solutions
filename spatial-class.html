<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<base href="https://r.geocompx.org/solutions/">
<title>Chapter 2 Geographic data in R | Geocomputation with R: Solutions</title>
<meta name="author" content="Robin Lovelace, Jakub Nowosad, Jannes Muenchow">
<meta name="description" content="library(sf) library(spData) library(terra) E1. Use summary() on the geometry column of the world data object that is included in the spData package. What does the output tell us about: Its...">
<meta name="generator" content="bookdown 0.36 with bs4_book()">
<meta property="og:title" content="Chapter 2 Geographic data in R | Geocomputation with R: Solutions">
<meta property="og:type" content="book">
<meta property="og:url" content="https://r.geocompx.org/solutions/spatial-class.html">
<meta property="og:image" content="https://r.geocompx.org/solutions/images/cover.png">
<meta property="og:description" content="library(sf) library(spData) library(terra) E1. Use summary() on the geometry column of the world data object that is included in the spData package. What does the output tell us about: Its...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 Geographic data in R | Geocomputation with R: Solutions">
<meta name="twitter:description" content="library(sf) library(spData) library(terra) E1. Use summary() on the geometry column of the world data object that is included in the spData package. What does the output tell us about: Its...">
<meta name="twitter:image" content="https://r.geocompx.org/solutions/images/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Lato-0.4.7/font.css" rel="stylesheet">
<link href="libs/Roboto_Mono-0.4.7/font.css" rel="stylesheet">
<link href="libs/Montserrat-0.4.7/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.6.0/transition.js"></script><script src="libs/bs3compat-0.6.0/tabs.js"></script><script src="libs/bs3compat-0.6.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.3/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.3/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h2>
        <a href="index.html" title="">Geocomputation with R: Solutions</a>
      </h2>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">Foundations</li>
<li><a class="active" href="spatial-class.html"><span class="header-section-number">2</span> Geographic data in R</a></li>
<li><a class="" href="attr.html"><span class="header-section-number">3</span> Attribute data operations</a></li>
<li><a class="" href="spatial-operations.html"><span class="header-section-number">4</span> Spatial data operations</a></li>
<li><a class="" href="geometric-operations.html"><span class="header-section-number">5</span> Geometry operations</a></li>
<li><a class="" href="raster-vector.html"><span class="header-section-number">6</span> Raster-vector interactions</a></li>
<li><a class="" href="reproj-geo-data.html"><span class="header-section-number">7</span> Reprojecting geographic data</a></li>
<li><a class="" href="read-write.html"><span class="header-section-number">8</span> Geographic data I/O</a></li>
<li class="book-part">Extensions</li>
<li><a class="" href="adv-map.html"><span class="header-section-number">9</span> Making maps with R</a></li>
<li><a class="" href="gis.html"><span class="header-section-number">10</span> Bridges to GIS software</a></li>
<li><a class="" href="algorithms.html"><span class="header-section-number">11</span> Scripts, algorithms and functions</a></li>
<li><a class="" href="spatial-cv.html"><span class="header-section-number">12</span> Statistical learning</a></li>
<li class="book-part">Applications</li>
<li><a class="" href="transport.html"><span class="header-section-number">13</span> Transportation</a></li>
<li><a class="" href="location.html"><span class="header-section-number">14</span> Geomarketing</a></li>
<li><a class="" href="eco.html"><span class="header-section-number">15</span> Ecology</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/geocompx/solutions">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="spatial-class" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Geographic data in R<a class="anchor" aria-label="anchor" href="#spatial-class"><i class="fas fa-link"></i></a>
</h1>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://jakubnowosad.com/spData/">spData</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/">terra</a></span><span class="op">)</span></span></code></pre></div>
<p>E1. Use <code><a href="https://rdrr.io/pkg/terra/man/summary.html">summary()</a></code> on the geometry column of the <code>world</code> data object that is included in the <strong>spData</strong> package. What does the output tell us about:</p>
<ul>
<li>Its geometry type?</li>
<li>The number of countries?</li>
<li>Its coordinate reference system (CRS)?</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/summary.html">summary</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span></span>
<span><span class="co">#&gt;     iso_a2           name_long          continent          region_un        </span></span>
<span><span class="co">#&gt;  Length:177         Length:177         Length:177         Length:177        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;   subregion             type              area_km2             pop          </span></span>
<span><span class="co">#&gt;  Length:177         Length:177         Min.   :    2417   Min.   :5.63e+04  </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   1st Qu.:   46185   1st Qu.:3.75e+06  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Median :  185004   Median :1.04e+07  </span></span>
<span><span class="co">#&gt;                                        Mean   :  832558   Mean   :4.28e+07  </span></span>
<span><span class="co">#&gt;                                        3rd Qu.:  621860   3rd Qu.:3.07e+07  </span></span>
<span><span class="co">#&gt;                                        Max.   :17018507   Max.   :1.36e+09  </span></span>
<span><span class="co">#&gt;                                                           NA's   :10        </span></span>
<span><span class="co">#&gt;     lifeExp       gdpPercap                 geom    </span></span>
<span><span class="co">#&gt;  Min.   :50.6   Min.   :   597   MULTIPOLYGON :177  </span></span>
<span><span class="co">#&gt;  1st Qu.:65.0   1st Qu.:  3752   epsg:4326    :  0  </span></span>
<span><span class="co">#&gt;  Median :72.9   Median : 10734   +proj=long...:  0  </span></span>
<span><span class="co">#&gt;  Mean   :70.9   Mean   : 17106                      </span></span>
<span><span class="co">#&gt;  3rd Qu.:76.8   3rd Qu.: 24233                      </span></span>
<span><span class="co">#&gt;  Max.   :83.6   Max.   :120860                      </span></span>
<span><span class="co">#&gt;  NA's   :10     NA's   :17</span></span>
<span><span class="co"># - Its geometry type?</span></span>
<span><span class="co">#   multipolygon</span></span>
<span><span class="co"># - The number of countries?</span></span>
<span><span class="co">#   177</span></span>
<span><span class="co"># - Its coordinate reference system (CRS)?</span></span>
<span><span class="co">#   epsg:4326</span></span></code></pre></div>
<p>E2. Run the code that ‚Äògenerated‚Äô the map of the world in Section 2.2.3 (Basic map making).
Find two similarities and two differences between the image on your computer and that in the book.</p>
<ul>
<li>What does the <code>cex</code> argument do (see <code><a href="https://r-spatial.github.io/sf/reference/plot.html">?plot</a></code>)?</li>
<li>Why was <code>cex</code> set to the <code>sqrt(world$pop) / 10000</code>?</li>
<li>Bonus: experiment with different ways to visualize the global population.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">world</span><span class="op">[</span><span class="st">"continent"</span><span class="op">]</span>, reset <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">cex</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">world</span><span class="op">$</span><span class="va">pop</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10000</span></span>
<span><span class="va">world_cents</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html">st_centroid</a></span><span class="op">(</span><span class="va">world</span>, of_largest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_centroid assumes attributes are constant over geometries</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">world_cents</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, cex <span class="op">=</span> <span class="va">cex</span><span class="op">)</span></span>
<span><span class="co"># - What does the `cex` argument do (see `?plot`)?</span></span>
<span><span class="co">#   It specifies the size of the circles</span></span>
<span><span class="co"># - Why was `cex` set to the `sqrt(world$pop) / 10000`?</span></span>
<span><span class="co">#   So the circles would be visible for small countries but not too large for large countries, also because area increases as a linear function of the square route of the diameter defined by `cex`</span></span>
<span><span class="co"># - Bonus: experiment with different ways to visualize the global population.</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">world_cents</span><span class="op">)</span>, cex <span class="op">=</span> <span class="va">world</span><span class="op">$</span><span class="va">pop</span> <span class="op">/</span> <span class="fl">1e9</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">world_cents</span><span class="op">)</span>, cex <span class="op">=</span> <span class="va">world</span><span class="op">$</span><span class="va">pop</span> <span class="op">/</span> <span class="fl">1e8</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">world</span><span class="op">[</span><span class="st">"pop"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">world</span><span class="op">[</span><span class="st">"pop"</span><span class="op">]</span>, logz <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Similarities: global extent, colorscheme, relative size of circles</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># Differences: projection (Antarctica is much smaller for example), graticules, location of points in the countries.</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># To understand these differences read-over, run, and experiment with different argument values in this script: https://github.com/geocompx/geocompr/raw/main/code/02-contpop.R</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># `cex` refers to the diameter of symbols plotted, as explained by the help page `?graphics::points`. It is an acronym for 'Chacter symbol EXpansion'.</span></span>
<span><span class="co"># It was set to the square route of the population divided by 10,000 because a) otherwise the symbols would not fit on the map and b) to make circle area proportional to population.</span></span></code></pre></div>
<p><img src="02-spatial-data_files/figure-html/02-ex-e2-1.png" width="100%" style="display: block; margin: auto;"><img src="02-spatial-data_files/figure-html/02-ex-e2-2.png" width="100%" style="display: block; margin: auto;"><img src="02-spatial-data_files/figure-html/02-ex-e2-3.png" width="100%" style="display: block; margin: auto;"><img src="02-spatial-data_files/figure-html/02-ex-e2-4.png" width="100%" style="display: block; margin: auto;"></p>
<p>E3. Use <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code> to create maps of Nigeria in context (see Section 2.2.3).</p>
<ul>
<li>Adjust the <code>lwd</code>, <code>col</code> and <code>expandBB</code> arguments of <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code>.</li>
<li>Challenge: read the documentation of <code><a href="https://rdrr.io/pkg/terra/man/text.html">text()</a></code> and annotate the map.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nigeria</span> <span class="op">=</span> <span class="va">world</span><span class="op">[</span><span class="va">world</span><span class="op">$</span><span class="va">name_long</span> <span class="op">==</span> <span class="st">"Nigeria"</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">nigeria</span><span class="op">)</span>, expandBB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">1</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"gray"</span>, lwd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">world</span><span class="op">[</span><span class="fl">0</span><span class="op">]</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">world_coords</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html">st_coordinates</a></span><span class="op">(</span><span class="va">world_cents</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/text.html">text</a></span><span class="op">(</span><span class="va">world_coords</span>, <span class="va">world</span><span class="op">$</span><span class="va">iso_a2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Alternative answer:</span></span>
<span><span class="va">nigeria</span> <span class="op">=</span> <span class="va">world</span><span class="op">[</span><span class="va">world</span><span class="op">$</span><span class="va">name_long</span> <span class="op">==</span> <span class="st">"Nigeria"</span>, <span class="op">]</span></span>
<span><span class="va">africa</span> <span class="op">=</span> <span class="va">world</span><span class="op">[</span><span class="va">world</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Africa"</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">nigeria</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"white"</span>, lwd <span class="op">=</span> <span class="fl">3</span>, main <span class="op">=</span> <span class="st">"Nigeria in context"</span>, border <span class="op">=</span> <span class="st">"lightgrey"</span>, expandBB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fl">3</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, border <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">nigeria</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"yellow"</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, border <span class="op">=</span> <span class="st">"darkgrey"</span><span class="op">)</span></span>
<span><span class="va">a</span> <span class="op">=</span> <span class="va">africa</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"Niger"</span>, <span class="va">africa</span><span class="op">$</span><span class="va">name_long</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">ncentre</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html">st_centroid</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_centroid assumes attributes are constant over geometries</span></span>
<span><span class="va">ncentre_num</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html">st_coordinates</a></span><span class="op">(</span><span class="va">ncentre</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/text.html">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ncentre_num</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">ncentre_num</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span>, labels <span class="op">=</span> <span class="va">a</span><span class="op">$</span><span class="va">name_long</span><span class="op">)</span></span></code></pre></div>
<p><img src="02-spatial-data_files/figure-html/02-ex-e3-1.png" width="100%" style="display: block; margin: auto;"><img src="02-spatial-data_files/figure-html/02-ex-e3-2.png" width="100%" style="display: block; margin: auto;"></p>
<p>E4. Create an empty <code>SpatRaster</code> object called <code>my_raster</code> with 10 columns and 10 rows.
Assign random values between 0 and 10 to the new raster and plot it.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_raster</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html">rast</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">10</span>, nrow <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                 vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span>, size <span class="op">=</span> <span class="fl">10</span> <span class="op">*</span> <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">my_raster</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="02-spatial-data_files/figure-html/02-ex-e4-1.png" width="100%" style="display: block; margin: auto;"></div>
<p>E5. Read-in the <code>raster/nlcd.tif</code> file from the <strong>spDataLarge</strong> package.
What kind of information can you get about the properties of this file?</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nlcd</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"raster/nlcd.tif"</span>, package <span class="op">=</span> <span class="st">"spDataLarge"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">nlcd</span><span class="op">)</span> <span class="co"># dimensions</span></span>
<span><span class="co">#&gt; [1] 1359 1073    1</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html">res</a></span><span class="op">(</span><span class="va">nlcd</span><span class="op">)</span> <span class="co"># resolution</span></span>
<span><span class="co">#&gt; [1] 31.5 31.5</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/ext.html">ext</a></span><span class="op">(</span><span class="va">nlcd</span><span class="op">)</span> <span class="co"># extent</span></span>
<span><span class="co">#&gt; SpatExtent : 301903.344386758, 335735.354381954, 4111244.46098842, 4154086.47216415 (xmin, xmax, ymin, ymax)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html">nlyr</a></span><span class="op">(</span><span class="va">nlcd</span><span class="op">)</span> <span class="co"># number of layers</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html">crs</a></span><span class="op">(</span><span class="va">nlcd</span><span class="op">)</span><span class="op">)</span> <span class="co"># CRS</span></span>
<span><span class="co">#&gt; PROJCRS["NAD83 / UTM zone 12N",</span></span>
<span><span class="co">#&gt;     BASEGEOGCRS["NAD83",</span></span>
<span><span class="co">#&gt;         DATUM["North American Datum 1983",</span></span>
<span><span class="co">#&gt;             ELLIPSOID["GRS 1980",6378137,298.257222101,</span></span>
<span><span class="co">#&gt;                 LENGTHUNIT["metre",1]]],</span></span>
<span><span class="co">#&gt;         PRIMEM["Greenwich",0,</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">#&gt;         ID["EPSG",4269]],</span></span>
<span><span class="co">#&gt;     CONVERSION["UTM zone 12N",</span></span>
<span><span class="co">#&gt;         METHOD["Transverse Mercator",</span></span>
<span><span class="co">#&gt;             ID["EPSG",9807]],</span></span>
<span><span class="co">#&gt;         PARAMETER["Latitude of natural origin",0,</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8801]],</span></span>
<span><span class="co">#&gt;         PARAMETER["Longitude of natural origin",-111,</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8802]],</span></span>
<span><span class="co">#&gt;         PARAMETER["Scale factor at natural origin",0.9996,</span></span>
<span><span class="co">#&gt;             SCALEUNIT["unity",1],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8805]],</span></span>
<span><span class="co">#&gt;         PARAMETER["False easting",500000,</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8806]],</span></span>
<span><span class="co">#&gt;         PARAMETER["False northing",0,</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8807]]],</span></span>
<span><span class="co">#&gt;     CS[Cartesian,2],</span></span>
<span><span class="co">#&gt;         AXIS["(E)",east,</span></span>
<span><span class="co">#&gt;             ORDER[1],</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">#&gt;         AXIS["(N)",north,</span></span>
<span><span class="co">#&gt;             ORDER[2],</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">#&gt;     USAGE[</span></span>
<span><span class="co">#&gt;         SCOPE["Engineering survey, topographic mapping."],</span></span>
<span><span class="co">#&gt;         AREA["North America - between 114¬∞W and 108¬∞W - onshore and offshore. Canada - Alberta; Northwest Territories; Nunavut; Saskatchewan. United States (USA) - Arizona; Colorado; Idaho; Montana; New Mexico; Utah; Wyoming."],</span></span>
<span><span class="co">#&gt;         BBOX[31.33,-114,84,-108]],</span></span>
<span><span class="co">#&gt;     ID["EPSG",26912]]</span></span></code></pre></div>
<p>E6. Check the CRS of the <code>raster/nlcd.tif</code> file from the <strong>spDataLarge</strong> package.
What kind of information you can learn from it?</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html">crs</a></span><span class="op">(</span><span class="va">nlcd</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; PROJCRS["NAD83 / UTM zone 12N",</span></span>
<span><span class="co">#&gt;     BASEGEOGCRS["NAD83",</span></span>
<span><span class="co">#&gt;         DATUM["North American Datum 1983",</span></span>
<span><span class="co">#&gt;             ELLIPSOID["GRS 1980",6378137,298.257222101,</span></span>
<span><span class="co">#&gt;                 LENGTHUNIT["metre",1]]],</span></span>
<span><span class="co">#&gt;         PRIMEM["Greenwich",0,</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">#&gt;         ID["EPSG",4269]],</span></span>
<span><span class="co">#&gt;     CONVERSION["UTM zone 12N",</span></span>
<span><span class="co">#&gt;         METHOD["Transverse Mercator",</span></span>
<span><span class="co">#&gt;             ID["EPSG",9807]],</span></span>
<span><span class="co">#&gt;         PARAMETER["Latitude of natural origin",0,</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8801]],</span></span>
<span><span class="co">#&gt;         PARAMETER["Longitude of natural origin",-111,</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8802]],</span></span>
<span><span class="co">#&gt;         PARAMETER["Scale factor at natural origin",0.9996,</span></span>
<span><span class="co">#&gt;             SCALEUNIT["unity",1],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8805]],</span></span>
<span><span class="co">#&gt;         PARAMETER["False easting",500000,</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8806]],</span></span>
<span><span class="co">#&gt;         PARAMETER["False northing",0,</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8807]]],</span></span>
<span><span class="co">#&gt;     CS[Cartesian,2],</span></span>
<span><span class="co">#&gt;         AXIS["(E)",east,</span></span>
<span><span class="co">#&gt;             ORDER[1],</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">#&gt;         AXIS["(N)",north,</span></span>
<span><span class="co">#&gt;             ORDER[2],</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">#&gt;     USAGE[</span></span>
<span><span class="co">#&gt;         SCOPE["Engineering survey, topographic mapping."],</span></span>
<span><span class="co">#&gt;         AREA["North America - between 114¬∞W and 108¬∞W - onshore and offshore. Canada - Alberta; Northwest Territories; Nunavut; Saskatchewan. United States (USA) - Arizona; Colorado; Idaho; Montana; New Mexico; Utah; Wyoming."],</span></span>
<span><span class="co">#&gt;         BBOX[31.33,-114,84,-108]],</span></span>
<span><span class="co">#&gt;     ID["EPSG",26912]]</span></span></code></pre></div>
<p>The WKT above describes a two-dimensional projected coordinate reference system.
It is based on the GRS 1980 ellipsoid with North American Datum 1983 and the Greenwich prime meridian.
It used the Transverse Mercator projection to transform from geographic to projected CRS (UTM zone 12N).
Its first axis is related to eastness, while the second one is related to northness, and both axes have units in meters.
The SRID of the above CRS is ‚ÄúEPSG:26912‚Äù.</p>

</div>
  <div class="chapter-nav">
<div class="prev"><a href="intro.html"><span class="header-section-number">1</span> Introduction</a></div>
<div class="next"><a href="attr.html"><span class="header-section-number">3</span> Attribute data operations</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <h2>Note: Second Edition is under construction üèó</h2>
    <!--<p>Now is a great time to provide feedback</p>-->
        <ul class="list-unstyled">
<li><a href="https://r.geocompx.org/">Read the book <i class="fa fa-book"></i></a></li>
          <li><a href="https://discord.gg/PMztXYgNxp">Chat on Discord <i class="fab fa-discord"></i></a></li>
          <li><a href="https://supportukrainenow.org/">Support Ukraine üá∫üá¶
</a></li>
        </ul>
<hr>
<nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav"><li><a class="nav-link" href="#spatial-class"><span class="header-section-number">2</span> Geographic data in R</a></li></ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/geocompx/solutions/blob/main/02-spatial-data.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/geocompx/solutions/edit/main/02-spatial-data.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Geocomputation with R: Solutions</strong>" was written by Robin Lovelace, Jakub Nowosad, Jannes Muenchow. It was last built on 2023-11-26.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
